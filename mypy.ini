# mypy configuration for CoupaDownloads
# 
# This configuration starts lenient and will be tightened as we add type hints.
# Run with: mypy src/

[mypy]
# Python version
python_version = 3.12

# Warnings
warn_return_any = True
warn_unused_configs = True
warn_unused_ignores = True
warn_redundant_casts = True

# Disallow untyped definitions gradually
disallow_untyped_defs = False
disallow_incomplete_defs = False
check_untyped_defs = True

# None and Optional handling
strict_optional = True
strict_equality = True

# Import discovery
ignore_missing_imports = True

# Error codes
disable_error_code = 
    var-annotated,
    misc

# Exclude patterns
exclude = 
    tests/,
    src/specs/,
    src/lib/ui/

# Per-module overrides
[mypy-src.config.*]
disallow_untyped_defs = True
disallow_incomplete_defs = True

[mypy-src.core.*]
disallow_untyped_defs = True
disallow_incomplete_defs = True

[mypy-src.orchestrators.*]
disallow_untyped_defs = True
disallow_incomplete_defs = True

[mypy-src.workers.*]
disallow_untyped_defs = False

[mypy-src.lib.*]
disallow_untyped_defs = False

[mypy-src.main]
disallow_untyped_defs = False

# Plugin configuration
[mypy.plugins.pydantic]
init_forbid_extra = True
init_typed = True
warn_required_dynamic_aliases = True
warn_untyped_fields = True
